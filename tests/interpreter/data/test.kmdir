(program MyProgram
    (entry MyModule Main)
    (module MyModule
        (data
            (myString "abcdef123")
            (myI8s I8 -52 -41 -59)
            (myUI8s UI8 52 41 59)
            (myI16s I16 -52 -41 -59)
            (myUI16s UI16 52 41 59)
            (myI32s I32 -52 -41 -59)
            (myUI32s UI32 52 41 59)
            (myI64s I64 -52 -41 -59)
            (myUI64s UI64 52 41 59)
            (myF32s F32 1.23 -4.56 789)
            (myF64s F64 1.23 -4.56 789)
            (myBools Bool true false true)
        )

        (function Main (params) (returns)
            (Call MyModule TestString)
            (Call MyModule TestI8s)
            (Call MyModule TestUI8s)
            (Call MyModule TestI16s)
            (Call MyModule TestUI16s)
            (Call MyModule TestI32s)
            (Call MyModule TestUI32s)
            (Call MyModule TestI164s)
            (Call MyModule TestUI64s)
            (Call MyModule TestF32s)
            (Call MyModule TestF64s)
            (Call MyModule TestBools)
            (Exit 0)
        )
        (function TestString (params) (returns)
            (GetLength (data MyModule myString) $stack)
            (Assert (pop UI64) (UI64 9))

            (GetElement (UI64 2) (data MyModule myString) $stack)
            (Assert (pop UI8) (UI8 99))

            (Return)
        )
        (function TestI8s (params) (returns)
            (GetLength (data MyModule myI8s) $stack)
            (Assert (pop UI64) (UI64 3))

            (GetElement (UI64 1) (data MyModule myI8s) $stack)
            (Reinterpret (pop UI8) I8 $stack)
            (Assert (pop I8) (I8 -41))

            (Return)
        )
        (function TestUI8s (params) (returns)
            (GetLength (data MyModule myUI8s) $stack)
            (Assert (pop UI64) (UI64 3))

            (GetElement (UI64 1) (data MyModule myUI8s) $stack)
            (Assert (pop UI8) (UI8 41))

            (Return)
        )
        (function TestI16s (params) (returns)
            (GetLength (data MyModule myI16s) $stack)
            (Assert (pop UI64) (UI64 6))

            (GetElement (UI64 2) (data MyModule myI16s) $stack)
            (ZeroExtend (pop UI8) I16 $stack)
            (GetElement (UI64 3) (data MyModule myI16s) $stack)
            (ZeroExtend (pop UI8) I16 $stack)
            (LShift (pop I16) (UI8 8) $stack)
            (BOR (pop I16) (pop I16) $stack)
            (Assert (pop I16) (I16 -41))

            (Return)
        )
        (function TestUI16s (params) (returns)
            (GetLength (data MyModule myUI16s) $stack)
            (Assert (pop UI64) (UI64 6))

            (GetElement (UI64 2) (data MyModule myUI16s) $stack)
            (ZeroExtend (pop UI8) UI16 $stack)
            (GetElement (UI64 3) (data MyModule myUI16s) $stack)
            (ZeroExtend (pop UI8) UI16 $stack)
            (LShift (pop UI16) (UI8 8) $stack)
            (BOR (pop UI16) (pop UI16) $stack)
            (Assert (pop UI16) (UI16 41))

            (Return)
        )
        (function TestI32s (params) (returns)
            (Assert true false)
            (Return)
        )
        (function TestUI32s (params) (returns)
            (Assert true false)
            (Return)
        )
        (function TestI64s (params) (returns)
            (Assert true false)
            (Return)
        )
        (function TestUI64s (params) (returns)
            (Assert true false)
            (Return)
        )
        (function TestF32s (params) (returns)
            (Assert true false)
            (Return)
        )
        (function TestF64s (params) (returns)
            (Assert true false)
            (Return)
        )
        (function TestBools (params) (returns)
            (Assert true false)
            (Return)
        )
    )
)