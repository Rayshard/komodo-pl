(program MyProgram
    (entry MyModule Main)
    (module MyModule
        (function Main
            (locals
                (I64 result)
            )

            (Call MyModule Factorial 20 ~ (local result))
            (Print I64 (local result))
            
            (Syscall Exit (0))
        )
        (function Factorial (params (I64 number)) (returns I64)
            (locals
                (Bool equalsZero)
                (I64 numberMinus1)
                (I64 factorialNumberMinus1)
                (I64 result)
            )
            
            (Eq I64 (arg number) 0 (local equalsZero))
            (CJump retOneOnZero (local equalsZero))
            
            (Dec I64 (arg number) (local numberMinus1))
            (Call MyModule Factorial (local numberMinus1) ~ (local factorialNumberMinus1))
            (Mul I64 (arg number) (local factorialNumberMinus1) (local result))
            (Return (local result))
            
          (label retOneOnZero)
            (Return 1)
        )
    )
)