☐ Fix diagnostics to be more flexible